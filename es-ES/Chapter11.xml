<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "manual">
<!ENTITY YEAR "2022">
<!ENTITY HOLDER "Eneo Tecnología S.L. |">
]>

<chapter>
	<title>Sensores</title>
	<para>En la sección <literal>Sensors</literal> el usuario puede realizar la consulta, gestión y configuración de los sensores registrados en el Manager a través de la creación y edición de dominios y sensores. 
	Para ello, dispone de varias vistas que le ofrecen la posibilidad de realizar diversas acciones sobre los sensores que haya registrado en el Manager.</para>
	<para><literal>Sensors</literal> se encuentra disponible en el margen superior derecho del menú de cabecera, junto a la sección <emphasis role="bold">Tools</emphasis> y la zona de usuario. Este área del menú se llama <emphasis role="bold">Zona de configuración</emphasis>, porque a diferencia de las opciones disponibles en el margen superior izquierdo (Análisis), estas permiten la administración y configuración completas del Manager y de los sensores: políticas de reglas, alarmas, configuración de clúster o gestión del usuario, entre otras acciones.</para>
	<section>
		<title>Sensores: menú y opciones</title>
		<para>La organización de esta sección es muy similar, en cuanto a estructura, a la de otras partes de la web. En este caso, encontraremos:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><emphasis role="bold">Sección del submenú:</emphasis> opciones de configuración y gestión de sensores.</para>
				<para><literal>Expandir todo</literal>: Expande completamente el árbol de sensores.</para>
				<para><literal>Contraer todo</literal>: Contrae completamente el árbol de sensores.</para>
				<para><literal>Opciones</literal></para>
				<para><literal>+Añadir sensor</literal></para>
				<para><literal>+Añadir dominio</literal></para>
				<para><literal>Vista</literal></para>
			</listitem>
			<listitem>
				<para><emphasis role="bold">Área principal:</emphasis> la información que se muestra en este área dependerá de la vista seleccionada. Existen cuatro vistas disponibles para visualizar la organización de los sensores registrados en el Manager:</para>
				<para><literal>Árbol</literal>: listado que muestra la infraestructura de red según niveles de jerarquía y dependencia entre los elementos que la componen. Al lado de cada uno de los elementos se muestran dos iconos que permiten realizar las acciones de edición y borrado de los mismos. Esta es la vista que se muestra por defecto.</para>
				<para><literal>Mapa</literal>: sitúa la localización de los dominios y sensores sobre un mapa.</para>
				<para><literal>Puntos de acceso</literal>: nos ofrece acceso directo a la visualización de los Access Points definidos.</para>
				<para><literal>Sensores</literal> en la <literal>Vista</literal> el usuario puede encontrar una lista de sensores disponibles según las aplicaciones incluidas en su licencia. Haga clic en el sensor que desea verificar para ver una lista alfabética de todos los sensores asociados con esta aplicación.</para>
			</listitem>		
		</itemizedlist>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img001.png"/>
			</imageobject>
			<caption>
				<para>Vista general de la sección Sensores</para>
			</caption>
		</mediaobject>
		<note>
			<title>Nota</title>
			<para>Cada vista presenta su propio menú de opciones y las diferentes posibilidades de creación y edición de sensores o dominios.</para>
			<para>La vista Mapa no presenta opciones disponibles.</para>
		</note>
	</section>
	<section>
		<title>Opciones</title>
		<para>Aquí se encuentran las opciones disponibles en la sección Sensores. Pueden ser seleccionadas desde el botón <emphasis role="bold">Opciones</emphasis> y desde las opciones que se muestran haciendo click en el botón "Editar" tanto en el nivel de dominio como en el de sensor.</para>
		<itemizedlist>
			<listitem><para>Importar Árbol</para>
				<para>Esta opción le permite importar su infraestructura de red mediante la carga de un archivo a la plataforma de Redborder. Esto se mostrará en la vista de árbol.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img006.png"/>
					</imageobject>
					<caption>
						<para>Importar Árbol</para>
					</caption>
				</mediaobject>	
				<para>Hay dos maneras de importar un árbol</para>
				<orderedlist numeration="arabic">
					<listitem>
						<para><literal>Opciones->Importar árbol</literal></para>
					</listitem>
					<listitem>
						<para>Editar icono (nivel de dominio)</para>
					</listitem>
				</orderedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img005.png"/>
					</imageobject>
					<caption>
						<para>Importar/Exportar árbol del menú Opciones</para>
					</caption>
				</mediaobject>		
			</listitem>
			<listitem><para>Exportar árbol</para>
				<para>Esta opción permite exportar un árbol y está al alcance de otras aplicaciones. El usuario descargará un archivo zip para almacenarlo en su computadora.</para>
				<para>Hay dos maneras de exportar un árbol</para>
				<orderedlist numeration="arabic">
					<listitem><para><literal>Opciones->Exportar árbol</literal></para></listitem>
					<listitem><para>Icono Editar (nivel de dominio)</para></listitem>
				</orderedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img007.png"/>
					</imageobject>
					<caption>
						<para>Exportar árbol</para>
					</caption>
				</mediaobject>			
			</listitem>
			<listitem><para>Levantar clúster del Chef</para></listitem>
			<listitem><para>Datos del clúster</para>
				<itemizedlist>
					<listitem><para>Datos indexados: Muestra estadísticas de datos indexados del clúster</para></listitem>
					<listitem><para>Históricos: Muestra información acerca del histórico de datos del clúster</para>
					</listitem>
					<listitem><para>Realtime: Muestra información acerca del proceso Realtime</para>
					</listitem>
				</itemizedlist>
			</listitem>
		</itemizedlist>		
	</section>
	<section>
		<title>Vistas</title>
		<para>Cuando el usuario accede a la sección <literal>Sensores</literal> puede encontrar una lista (vista de árbol) en la que se muestran los dominios y sensores que forman parte de su infraestructura de red. En este punto vamos a revisar cada vista y las acciones disponibles.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img002.png"/>
			</imageobject>
			<caption>
				<para>Opciones del menú Vista</para>
			</caption>
		</mediaobject>
		<section>
			<title>Vista árbol</title>
			<para>La vista <literal>árbol</literal> es la que se muestra por defecto al acceder a <literal>Sensores</literal>.
			 En ella se visualiza un listado en el que se muestra la organización de dominios y sensores según niveles de jerarquía y dependencia. </para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img003.png"/>
				</imageobject>
				<caption>
					<para><literal>Vista árbol</literal></para>
				</caption>
			</mediaobject>
			<para>Desde esta vista el usuario puede añadir un nuevo dominio o sensor, borrar los existentes, acceder a otras vistas, importar y exportar el arbol así como editar directamente todos los dominios y sensores que son parte del listado.</para>
			<para>Cada elemento que se muestra en el arbol tiene dos iconos: Editar y borrar. (Los mismos iconos funcionan en la vista árbol y en la vista sensor):</para>
			<mediaobject>
				<imageobject>
					<imagedata scale="100" align="center" fileref="images/ch11_img004b.png"/>
				</imageobject>
				<caption>
					<para>Iconos "Editar" y "Eliminar"</para>
				</caption>
			</mediaobject>
			<note>
				<title>Nota</title>
				<para>Las opciones del menú desplegado por el icono <emphasis role="bold">Editar</emphasis> variarán dependiendo de que si nos encontramos a nivel de dominio o sensores.</para>
			</note>
			<warning>
				<title>Advertencia</title>
				<para><emphasis role="bold">Algunos sensores no pueden ser eliminados.</emphasis></para>
				<para>En estos casos, el icono "Eliminar" aparecerá en color gris. Antes de que se elimine el dominio o el sensor, el sistema le mostrará una pantalla emergente con un mensaje de advertencia.</para>
				<para>Todos los usuarios y descendientes asignados a este dominio o sensor serán deshabilitados y asignados a los padres de este dominio o dominio raíz. El usuario con rol de administrador debe activar los permisos del usuario desde la sección<emphasis>Herramientas>Usuarios</emphasis>.</para>
			</warning>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="300" fileref="images/ch11_img004.png"/>
				</imageobject>
				<caption>
					<para>Confirmar eliminación de sensor</para>
				</caption>
			</mediaobject>
			<para>En caso de que se hayan registrado <emphasis role="bold">sensores IPS/IDS</emphasis> se mostrará el tipo de política/s que se le hayan aplicado.</para> 
			<para>Al hacer clic sobre él accedemos al panel de reglas incluidas en esa política. Para más información consulte el capítulo 8 <emphasis role="bold">"Creación de políticas".</emphasis></para>
			<mediaobject>
				<imageobject>
					<imagedata scale="100" align="center" fileref="images/ch11_img004c.png"/>
				</imageobject>
				<caption>
					<para>Icono Políticas</para>
				</caption>
			</mediaobject>
			<para><emphasis role="bold">Opciones disponibles en la vista de Árbol</emphasis></para>
			<itemizedlist mark="circle">
				<listitem>
					<para>Añadir un nuevo dominio o sensor</para>
				</listitem>
				<listitem>
					<para>Eliminar un dominio o sensor</para>
				</listitem>
				<listitem>
					<para>Acceder a otras vistas</para>
				</listitem>
				<listitem>
					<para>Importar y Exportar el árbol</para>
				</listitem>
				<listitem>
					<para>Editar un domninio o sensor</para>
				</listitem>
			</itemizedlist>
			<section>
				<title>Niveles de organización en Redborder Manager</title>
				<itemizedlist mark="bullet">
					<listitem>
						<para><emphasis role="bold">Dominio:</emphasis> se trata de contenedores que pueden incluir sensores, grupos de sensores, etc. El nivel dominio nos muestra el nombre del dominio y nos permite agregar una descripción. Es posible clasificarlos según su naturaleza (organizacional, espacial, etc.); cada tipo de dominio tendrá un icono identificativo:</para>
					</listitem>
					<listitem>
						<para><emphasis>Genérico</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Proveedor de servicios</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Organización</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Mercado</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Despliegue</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Namespace</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Campus</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Edificio</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis>Planta</emphasis></para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Sensores:</emphasis> nodos finales que se corresponden con elementos físicos colocados en la red (switches, routers, IPS, etc.).</para>
						<para>A nivel de sensores se muestra la siguiente información: nombre del sensor, IP, política aplicada (sensores IPS), último chequeo y versión. Es posible añadir una descripción al sensor.</para>
					</listitem>
				</itemizedlist>
				<note>
					<title>Nota</title>
					<para>Recuerde que la creación de los sensores IPS o Gateway se debe realizar a través del registro de los sensores en el proceso de instalación del Manager. 
					Sensors le permite editar y sobreescribir los parámetros que hayan heredado de la Configuración General: <literal>Herramientas->Configuración general</literal></para>
					<para>Los sensores del resto de Apps pueden crearse desde la sección <literal>Sensores</literal>.</para>
				</note>		
				<para><emphasis role="bold">Herencia de configuración</emphasis></para>
				<para>En la sección <emphasis role="bold">Herramientas</emphasis> encontramos opciones de Configuración General a través de los cuales el usuario puede definir parámetros generales del Manager y de las Apps.</para>
				<para>Este es el máximo nivel de configuración (actua como dominio root) por lo tanto, las propiedades definidas aquí serán heredadas por dominios y sensores que caen por debajo de este nivel.</para>
				<para>Cuando se crea un dominio o sensor o se edita por primera vez, podemos observar que algunos parámetros tienen la etiqueta "Heredado", lo que significa que han heredado los valores de la Configuración general. Sobrescriba esta información en caso de que quiera cambiarla.</para>
				<para>Los dominios y sensores que caen por debajo del nivel del elemento sobrescrito, heredan nuevamente las propiedades aplicadas a este elemento.</para>
			</section>
				<section>
					<title>Monitores</title>
					<note>
						<title>Nota</title>
						<para>Esta opción solo se encuentra disponible en el menú desplegado por el icono "Editar" a nivel de sensor.</para>
					</note>
					<para>Al hacer clic sobre icono del icono "Editar" sensor, aparece la opción <literal>Monitor</literal>.
					 Luego, podemos ver una lista con las métricas de monitoreo que se utilizan para monitorear el estado del sensor en diferentes niveles. La columna de tecnología indica el origen desde donde se recopilan los datos.</para>
					 <mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="150" fileref="images/ch11_img009.png"/>
						</imageobject>
						<caption>
							<para>Icono editar->Monitores</para>
						</caption>
					</mediaobject>
					<para>Estas son las acciones disponible para el control del estado del sensor: </para>
					<itemizedlist mark="bullet">
						<listitem>
							<para><emphasis role="bold">Restaurar predeterminado:</emphasis> aplica las métricas predeterminadas que se incluyen en el momento de creación de los sensores.</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Añadir monitor:</emphasis> muestra las métricas disponibles <literal>+Añadir Monitor</literal></para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Eliminar monitor:</emphasis> elimina la métrica aplicada.</para>
						</listitem>
					</itemizedlist>	
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img010.png"/>
						</imageobject>
						<caption>
							<para>Monitores</para>
						</caption>	
					</mediaobject>	
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="300" fileref="images/ch11_img010b.png"/>
						</imageobject>
						<caption>
							<para>Añadir monitor: Métricas disponibles</para>
						</caption>	
					</mediaobject>	
				</section>
			</section>
		</section>
		<section>
			<title>Vista Mapa</title>
			<para>Desde esta vista el usuario puede ver dónde están localizados geográficamente los dominios y sensores que tiene desplegados. Es posible <emphasis role="bold"> añadir una nueva localización</emphasis> a nivel de dominio o sensor, para que esta se muestre en el mapa al seleccionar esta vista.</para>
			<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img012.png"/>
					</imageobject>
					<caption>
						<para>Vista Map</para>
					</caption>
				</mediaobject>
			<para><emphasis role="bold">Añadir localización</emphasis></para>
			<para>Para añadir un sensor a la vista es necesario añadir previamente una localización en la interfaz de edición del dominio o sensor que se haya seleccionado. </para>
			<para>Para ello, puede acceder a la edición de los sensores y dominios al crear uno nuevo (<literal>+Añadir Sensor/Dominio</literal>) o bien, al editar uno ya existente desde el menú que se despliega con el botón Editar. En ambos casos encontrará un apartado llamado Localización en el que se muestra un mapa en el que puede buscar la localización deseada o indicarla haciendo clic sobre el mapa. A continuación, seleccionar la pestaña <literal>+Añadir Localización.</literal></para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img014.png"/>
				</imageobject>
				<caption>
					<para>Crear/Editar sensor: Localización</para>
				</caption>
			</mediaobject>	
			<para>Si ha buscado o seleccionado una localización, los campos mostrarán las coordenadas. De otra manera puede insertar manualmente los valores.</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="400" fileref="images/ch11_img013.png"/>
				</imageobject>
				<caption>
					<para>Defina las coordenadas para añadir la localización a un sensor o un dominio</para>
				</caption>
			</mediaobject>			
		</section>
		<section>
			<title>Vista de Puntos de Acceso</title>
			<para>Los Puntos de Acceso (AP) son los puntos de acceso de la infraestructura de red que están asociados a una localización. 
			Los Access Points dependen de la App Flow y aplican tanto a nivel de dominio como de sensores.</para>
			<para>Este es otro modo de visualizar su organización de sensores, a través de la distribución de los AP por dominio. 
			Se puede acceder a la visualización o creación de los Puntos de Acceso de dos maneras distintas:</para>
			<itemizedlist mark="bullet">
				<listitem>
					<para>Vista->Puntos de Acceso</para>
				</listitem>
				<listitem>
					<para>Icono editar a nivel de sensor/dominio->Editar: Vista Puntos de Acceso (situado en el submenú superior derecha).</para>
				</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img016.png"/>
				</imageobject>
				<caption>
					<para>Vista->Puntos de Acceso</para>
				</caption>
			</mediaobject>
			<note>
				<title>Nota</title>
				<para>Para saber a qué nivel nos encontramos, puede consultar la ruta de navegación situada en el margen superior izquierdo. 
				Puede navegar por las diferentes pantallas haciendo clic sobre alguno de los elementos de la ruta.</para>
			</note>
			<para>El submenú de esta interfaz muestra una serie de botones similares a los de la pantalla principal de <literal>Sensors.</literal> 
			Las acciones que puede realizar desde esta pantalla son las siguientes (estas pueden variar según si se está consultando a nivel de dominio o sensor):</para>
			<itemizedlist mark="bullet">
				<listitem>
					<para><literal>Mostrar en mapa/ Mostrar Plantas</literal>: muestra la distribución geográfica de los Puntos de Acceso o su localización en plantas en el caso en el que estemos consultando un dominio <literal>Planta</literal> con más de un nivel de planta.</para>
				</listitem>
				<listitem>
					<para><literal>Editar (nombre del dominio o sensor)</literal>: nos devuelve a la pantalla de edición del dominio o sensor.</para>
				</listitem>
				<listitem>
					<para><literal>Opciones->Exportar Puntos de Acceso/Borrar todos los Puntos de Acceso):</literal> permite exportar todos los Access Points a un archivo .csv o eliminar todos los Puntos de Acceso definidos para esa localización. </para>
				</listitem>
				<listitem>
					<para><literal>+Añadir sensores</literal>: añade un nuevo sensor que se define como como un Punto de Acceso. </para>
				</listitem>
				<listitem>
					<para><literal>+Añadir dominio</literal></para>
				</listitem>
				<listitem>
					<para><literal>Vistas</literal>: menú que permite navegar a través de las diferentes vistas existentes.</para>
				</listitem>
				<listitem>
					<para><literal>+Añadir Puntos de Acceso</literal></para>
				</listitem>
				<listitem>
				<para><literal>+Añadir zonas</literal></para>
			</listitem>
		</itemizedlist>
		<mediaobject>
			<imageobject>
				<imagedata scale="50" align="center" fileref="images/ch11_img018b.png"/>
			</imageobject>
			<caption>
				<para>Resumen de Puntos de Acceso</para>
			</caption>
		</mediaobject>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="300" fileref="images/ch11_img011b.png"/>
			</imageobject>
			<caption>
				<para>Añadir nuevo Punto de Acceso de zona</para>
			</caption>
		</mediaobject>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img018d.png"/>
			</imageobject>
			<caption>
				<para> Puntos de Acceso(Zona)</para>
			</caption>
		</mediaobject>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img019.png"/>
		</imageobject>
			<caption>
				<para>Añadir una nueva Zona de AP</para>
			</caption>
		</mediaobject>
	</section>	
	<section>
		<title>Añadir un dominio</title>	
		<para>Como hemos visto anteriormente, existen diversos tipos de dominios identificados a través de un icono en la vista de árbol. El proceso de adición de un dominio es muy sencillo; 
		la configuración deberá realizarse posteriormente mediante el icono "Editar-><literal>Edit</literal>" que encontramos al lado de cada dominio en la vista árbol o desde la vista <literal>Access Points</literal>.</para>
		<para>Seleccionar la opción <literal>+Add Domain</literal> que se encuentra en el submenú superior derecha, elegir el tipo de dominio que se quiere añadir, y a continuación, 
		rellenar los campos requeridos (estos variarán según el tipo de dominio a crear).</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img021.png"/>
			</imageobject>
			<caption>
				<para>Añadir un dominio: selección del tipo de dominio</para>
			</caption>
		</mediaobject>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img022.png"/>
			</imageobject>
			<caption>
				<para>Añadir un dominio: rellenar datos para su creación</para>
			</caption>
		</mediaobject>
		<para>A partir de este momento, el resto de información asociada al dominio deberá modificarse haciendo clic en el botón de edición situado a la derecha de cada dominio en la vista árbol o <literal>Access Points</literal> y seleccionando la opción <literal>Edit.</literal></para>
	</section>
	<section>
		<title>Editar un dominio</title>
		<para>Desde esta interfaz puede modificar la configuración de un dominio existente e ingresar la información de un dominio recién creado.</para>
		<para>Para acceder a esta pantalla, el usuario debe hacer clic en el botón editar a la derecha del dominio que desea editar desde la vista de árbol o <literal>Puntos de acceso</literal> 
		y selecciona la opción<literal>Editar</literal>.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img023.png"/>
			</imageobject>
			<caption>
				<para>Ejemplo de edición de un dominio</para>
			</caption>
		</mediaobject>
		<para>Estos son los datos generales que podemos modificar para los dominios. Sin embargo, dependiendo del tipo de dominio seleccionado, aparecerá uno de estos campos:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><emphasis role="bold">General:</emphasis> Muestra información general del sensor. Nombre (no editable desde la Web), tipo de dominio: seleccione el tipo de dominio en el cuadro) y descripción.</para>	
			</listitem>
			<listitem>
				<para><emphasis role="bold">Servidores:</emphasis> En esta sección, el usuario puede definir la configuración de los servidores Proxy y Syslog. Todos los valores mostrados se heredan de forma predeterminada. Sobrescribe si es necesario.</para>	
			</listitem>
			<listitem>
				<para><emphasis role="bold">Localización:</emphasis> Localiza el sensor/dominio en un mapa mundial. Esta ubicación se mostrará en la vista Mapa.</para>	
			</listitem>
		</itemizedlist>			
	</section>
	<section>
		<title>Añadir un sensor</title>
		<para>A lo largo de las opciones del submenú encontramos <literal>+Añadir un Sensor.</literal> En el menú desplegable, muestran los diferentes sensores disponibles para agregar a la infraestructura de red.</para>
		<para>Seleccione el tipo de sensor en el menú desplegable y luego complete la información solicitada.</para>
		<para>También es posible reclamar un sensor desde un proxy remoto utilizando la opción en el menú desplegable e ingresando el UUID del sensor.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img020.png"/>
			</imageobject>
			<caption>
				<para>Añadir un sensor</para>
			</caption>
		</mediaobject>
		<important>
			<title>Importante</title>
			<para>En el momento en que se crea un sensor Redborder, por defecto se establece como raíz, por encima del nivel de dominio.</para>
			<para>El usuario puede organizar su infraestructura de sensores en cualquier momento, arrastrando y soltando el sensor en el nivel en el que desea colocarlo.</para>
			<para><emphasis role="bold">El sensor hereda automáticamente las propiedades del dominio raíz.</emphasis> (políticas, modo de funcionamiento, variables de Snort, etc.).</para>
		</important>
	</section>	
	<section>
		<title>Tipos de sensores y configuración de dispositivos</title>
		<para>En la sección de sensores de un Manager de Redborder, el usuario puede encontrar los diferentes tipos de sensores, cada uno realiza una función diferente:</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para><literal>Flujo</literal>: Para el monitoreo y la supervisión de la información de tráfico recivida.</para>			
			</listitem>
			<listitem>
				<para><literal>MSE</literal>: Para proporcionar servicios relacionados con la movilidad.</para>			
			</listitem>
			<listitem>
				<para><literal>Meraki</literal>: Sensor específico diseñado para integrar la solución de Meraki (Cisco).</para>			
			</listitem>
			<listitem>
				<para><literal>Aruba ALE</literal>: Para recopilar datos de dispositivos móviles habilitados para redes Wi-Fi (protegiendo la privacidad personal).</para>			
			</listitem>
			<listitem>
				<para><literal>Dispositivo de monitor</literal>: Para mantener el control total sobre el estado de la infraestructura.</para>			
			</listitem>
			<listitem>
				<para><literal>Twitter</literal>: Diseñado para recopilar actividad del uso de Twitter.</para>			
			</listitem>
			<listitem>
				<para><literal>Vault</literal>: Permite visualizar y analizar los logs recibidos de los diferentes servicios y dispositivos.</para>
			</listitem>
			<listitem>
				<para><literal>Mail Gateway</literal>: Sensor por el cual pasa el tráfico de correo (SMTP). </para>
			</listitem>
			<listitem>
				<para><literal>Claim Sensor</literal>: Permite vincular el manager con el client proxy, que es un software centralizado que recopila datos de petición realizada por un cliente y los envía al manager.</para>			
			</listitem>
		</itemizedlist>
		<section>
		<title>Monitor</title>
		<para>El sensor del dispositivo monitor es uno de los últimos desarrollos que viene con la versión 80-6 de Redborder. Se puede usar para monitorear cualquier dispositivo con una dirección IP que admita snmp, redfish o ipmi. Al crear o actualizar el sensor del dispositivo monitor, se deben definir las credenciales para los protocolos correspondientes. En caso de que no se defina una cadena de comunidad para snmp, se utilizará el "público" predeterminado.</para>
		<para>Una vez que el usuario ha iniciado sesión en el dashboard del Manager el sensor se puede agregar usando el menú <literal>Sensores > Añadir un Sensor</literal> y luego haciendo clic en <literal>‘Monitor’</literal>.</para>
		<para>Se le puede solicitar algunos parámetros obligatorios y opcionales..</para>
		<itemizedlist mark="bullet">
			<listitem>
				<para>Nombre único</para>
			</listitem>
			<listitem>	
				<para>La dirección IP de la máquina que el usuario desea monitorear</para>
			</listitem>
			<listitem>	
				<para>El protocolo que el usuario usará para la monitorización</para>
			</listitem>
			<listitem>	
				<para>Las credenciales de la máquina para acceder al protocolo seleccionado.</para>
			</listitem>
			<listitem>	
				<para>La cadena de comunidad en caso de que el usuario use el protocolo snmp</para>		
			</listitem>
			</itemizedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img037.png"/>
				</imageobject>
				<caption>
					<para>Presione el botón "Guardar" para aplicar la configuración</para>
				</caption>
			</mediaobject>
		<note>
			<title>Nota</title>
			<para>Se pueden encontrar diferentes guías de configuración del sensor en la página de soporte de reBorder:</para>
			<para><emphasis role="bold">https://support.Redborder.com</emphasis></para>
		</note>
		</section>
		<section>
		<title>Mail Gateway</title>
		<para>El sensor Mail Gateway es uno de los últimos desarrollos que viene con la versión 80-22 de Redborder.
			Sensor por el cual pasa el tráfico de correo (SMTP). Funciona como un sencillo MTA (Mail Traffic Agent).
			Cada vez que el sensor recibe un email lo reenvía al servidor de correo correspondiente. Por otra parte,
			envía también al Manager una copia de los emails y sus adjuntos incluyendo datos adicionales. Este sensor
			debe ser registrado en el Manager para su correcto funcionamiento.
		</para>
		<section>
			<title>Instalación y registro de los sensores Mail Gateway</title>
			<para>El proceso de instalación del sensor  Mail Gateway consta fundamentalmente de tres pasos: configuración
				de red, registro del sensor en el Manager y configuración de los parámetros generales del sensor en la
				plataforma redborder. Para ello, deberá disponer del asistente de instalación (imagen ISO) obtenido
				mediante descarga o a través del DVD facilitado por redborder.
			</para>
			<para>Al poner en funcionamiento el asistente de instalación, visualizaremos el menú principal en el que
				encontrará la opción <literal>Install Gateway Sensor</literal>:
			</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img040.png"/>
				</imageobject>
				<textobject>
					<phrase>Asistente de instalación redborder: Instalar sensor Mail Gateway</phrase>
				</textobject>
				<caption>
					<para>Asistente de instalación redborder: Instalar sensor Mail Gateway</para>
				</caption>
			</mediaobject>
			<para>A continuación el usuario deberá introducir su nombre de usuario y contraseña
				<footnote><para>El nombre de usuario y contraseña que se deben introducir en este paso corresponden con
					los que se han indicado en el
					proceso de instalación del Manager y serán los que le sirvan para acceder a la plataforma web redborder.
				</para></footnote>
				, así como ejecutar el comando <emphasis role="bold">rb_sysconf</emphasis>:
			</para>
			<orderedlist numeration="arabic">
				<listitem>
					<para>Login</para>
				</listitem>
				<listitem>
					<para>Password</para>
				</listitem>
				<listitem>
					<para>Comando rb_sysconf</para>
				</listitem>
			</orderedlist>
			<para>Este proceso es idéntico al expuesto en la <emphasis role="bold">Finalización del proceso de instalación
				del asistente para la configuración del Manager.</emphasis>
			</para>
		</section>
		<section>
			<title>Configuración de red de los sensores Gateway</title>
			<para>Una vez ha ejecutado el comando <literal>rb_sysconf</literal> accederá al <emphasis role="bold"> Menú
				de Configuración redborder.</emphasis>
			</para>
			<para>Este menú consta de 4 opciones:</para>
			<orderedlist numeration="arabic">
				<listitem>
					<para><literal>System Configuration:</literal>desde esta opción se pueden definir y modificar una
						serie de ajustes básicos del sistema como el nombre, hora, tipo de teclado, etc.
					</para>
				</listitem>
				<listitem>
					<para><literal>Network Configuration:</literal> esta es la opción desde la cual se realizan todas
						las configuraciones de red para la correcta implantación de la solución.
					</para>
				</listitem>
				<listitem>
					<para><literal>Passwords:</literal> acceda a esta opción si desea modificar sus contraseñas.</para>
				</listitem>
				<listitem>
					<para><literal>quit:</literal> Salir.</para>
				</listitem>
			</orderedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img041.png"/>
				</imageobject>
				<textobject>
					<phrase>Menú de configuración redborder</phrase>
				</textobject>
				<caption>
					<para>Menú de configuración redborder</para>
				</caption>
			</mediaobject>
			<note>
				<title>Nota</title>
				<para>Recuerde: selección de opciones predeterminadas: <keycap>Enter</keycap></para>
			</note>
			<para>Como se ha comentado al inicio del capítulo, el primer paso para comenzar la configuración de los
				sensores Mail Gateway es el establecimiento de los parámetros de red o puesta en red de los sensores.
			</para>
			<para>Para comenzar el proceso seleccionar la opción <literal>2) Network Configuration</literal> del menú
				de Configuración redborder.
			</para>
			<para>Estos son los pasos que hay que seguir para realizar la instalación de los sensores Mail Gateway:</para>
			<orderedlist numeration="arabic">
				<listitem>
					<para>Configuración de la red de gestión:</para>
					<para>Creación del bond y asignación de interfaz de gestión.</para>
				</listitem>
				<listitem>
					<para>Configuración DNS y dominio</para>
				</listitem>
			</orderedlist>
			<note>
				<title>Nota</title>
				<para>El orden que se siga en los pasos que comprenden la configuración de la red de gestión es
					indiferente. El orden indicado en este manual de instalación es el que se considera más óptimo.
				</para>
				<para>Hasta que no se haya realizado esta configuración, no se podrá proceder al registro de los
					sensores en el Manager.
				</para>
			</note>
			<warning>
				<title>Advertencia</title>
				<para>Para la instalación y registro de los sensores Mail Gateway es necesario disponer de tan solo un bond.</para>
				<para>En caso de que el sistema se instale en un equipo real que disponga de más de una tarjeta de red,
					el usuario deberá elegir cuál será el bond de gestión.
				</para>
			</warning>
			<section>
				<title>Creación de un nuevo bond y asignación de puertos</title>
				<para>Una vez que hemos accedido al <literal>redborder Network configuration menu</literal>
					seleccionamos la opción <literal>1) Management Network Configuration</literal> desde la cual
					podremos realizar la creación de un bond para la instalación del sensor.
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img042.png"/>
					</imageobject>
					<caption>
						<para>redborder Network Configuration menu
						</para>
					</caption>
				</mediaobject>
				<para>Para ilustrar este proceso crearemos un bonding (bond0) y le asignaremos 2 puertos.</para>
				<para>Seleccione la opción <keycap>n</keycap> que aparece en el submenú lateral derecho de la pantalla.</para>
				<para>Una vez que haya revisado los puertos que se encuentran disponibles, seleccione aquel que desea
					asignar al bonding, tal y como aparece en el margen inferior de la pantalla anterior.
				</para>
				<para>Introduzca el número de puerto en la línea <literal>Insert bonding first port [0]:</literal></para>
				<para>El número que aparece entre corchetes <literal>[]</literal> es el que define el sistema por
					defecto. Para seleccionar este número, pulse <keycap>Enter.</keycap>
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img043.png"/>
					</imageobject>
					<caption>
						<para>Creación de un bond: asignación de puertos</para>
					</caption>
				</mediaobject>
				<para>El puerto seleccionado desaparecerá de la opción de puertos disponibles.</para>
				<important>
					<title>Importante</title>
					<para>El sistema solo permite la creación de un máximo de 4 bonds: (0-3).</para>
				</important>
			</section>
			<section>
				<title>Finalizar el proceso de creación del bonding</title>
				<para>Antes de aplicar cambios y finalizar el proceso de creación del bonding el sistema le mostrará una
					tabla en la que figuran el nuevo bonding creado (bond0) junto con los puertos que le han sido
					asignados, la IP y Máscara y la ruta asignadas.
				</para>
				<para><emphasis role="bold">Aplicar cambios</emphasis></para>
				<para>Para que las modificaciones realizadas queden guardadas, debe realizar la acción de aplicar
					cambios, seleccionando la opción <keycap>a.</keycap>
				</para>
				<para>Puede borrar en cualquier momento el/ los bonds creados seleccionado la opción <literal>delete
					bonding</literal> insertando la letra <keycap>d.</keycap>
				</para>
				<para>Para volver al menú principal de configuración de red, seleccionar la opción <literal>quit</literal>
					con la letra <keycap>q.</keycap>
				</para>
			</section>
			<section>
				<title>Configuración DNS y dominio</title>
				<para>Al salir del <literal>1) Management Network configuration</literal> volvemos a la interfaz del
					<literal>redborder Network configuration menu</literal> en el que encontramos la opción de
					configuración de DNS y dominio. Inicie la configuración seleccionando: <literal>2) DNS and domain
						settings.</literal>
				</para>
				<para>Para realizar la configuración correctamente, el usuario deberá introducir:</para>
				<itemizedlist mark="bullet">
					<listitem>
						<para>Nombre de Dominio</para>
					</listitem>
					<listitem>
						<para>Dirección DNS primaria</para>
					</listitem>
					<listitem>
						<para>Dirección DNS secundaria (opcional)</para>
					</listitem>
				</itemizedlist>
				<para>Una vez introducida esta información, el sistema avisará de que se ha aplicado esta configuración
					de manera correcta.
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img044.png"/>
					</imageobject>
					<caption>
						<para>Configuración DNS y dominio</para>
					</caption>
				</mediaobject>
				<para>Para finalizar el proceso, es necesario aplicar cambios: seleccionar la opción <literal>apply</literal>
					insertando la letra <keycap>a</keycap> en el menú principal de configuración de red.
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img045.png"/>
					</imageobject>
					<caption>
						<para>Configuración DNS y dominio</para>
					</caption>
				</mediaobject>
			</section>
		</section>
		<section>
			<title>Registro de los sensores en el Manager</title>
			<para>Para finalizar el proceso de instalación de los sensores Mail Gateway, el último paso que debe llevarse
				a cabo es el <emphasis role="bold">Registro de los sensores en el Manager.</emphasis>
			</para>
			<para>Hasta que no se haya completado el registro, se visualizará un mensaje en el que se indica que los
				sensores aún no han sido registrados en el Manager.
			</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img046.png"/>
				</imageobject>
				<caption>
					<para>Inicio del registro de los sensores en el Manager</para>
				</caption>
			</mediaobject>
			<para>En el menú de registro de los sensores en el Manager encontramos las siguientes opciones:</para>
			<orderedlist numeration="arabic">
				<listitem>
					<para><literal>Hostname [rbsensor]:</literal> asignar un nombre al sensor.</para>
				</listitem>
				<listitem>
					<para><literal>Set local time:</literal> configurar hora local.</para>
				</listitem>
				<listitem>
					<para><literal>IP address for rB Master Manager [127.0.0.1]:</literal> introducir la IP del Manager.</para>
				</listitem>
				<listitem>
					<para><literal>Register rB Sensor/Manager:</literal> registro de los sensores en el manager
						Sensor/Manager. Hasta que no se haya completado el proceso de registro el usuario visualizará el
						siguiente mensaje rotulado en rojo: <literal>(not registered yet)</literal>
					</para>
				</listitem>
			</orderedlist>
			<section>
				<title>Asignar nombre al sensor (Hostname)</title>
				<para> Seleccionar la opción <literal>Hostname [rbsensor]</literal> del menú de registro de los sensores
					en el Manager insertando el número <keycap>1.</keycap>
				</para>
				<para> A continuación, en la línea <literal>Insert Hostname [rbsensor]:</literal> escribir el nombre que
					se desea dar al sensor que se va a registrar en el Manager. A partir de este momento, este es el
					nombre que visualizará en la web cuando acceda al listado de sensores IPS.
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img047.png"/>
					</imageobject>
					<caption>
						<para>Asignar nombre al sensor</para>
					</caption>
				</mediaobject>
				<note>
					<title>Nota</title>
					<para>Recuerde introducir un nombre coherente para el sensor. Evite utilizar el nombre “Sensor”, ya
						que ese es el nombre genérico que utiliza el Manager y que a la larga, podría causar confusión.
					</para>
				</note>
				<warning>
					<title>Advertencia</title>
					<para>El sistema le pedirá que verifique que el nombre elegido es el correcto, en ese caso, pulse
						<keycap>Enter</keycap>
					</para>
					<para>Si desea modificarlo inserte la letra <keycap>n</keycap></para>
					<para>El sistema procederá a cambiar el nombre del sensor. Para continuar, y regeresar al menú de
						configuración del sistema redborder, pulse cualquier tecla tal y como se indica
						<literal>Press a key to continue...</literal>
					</para>
				</warning>
			</section>
			<section>
				<title>Configurar hora local</title>
				<para>Seleccionar la opción <literal>2) Set local time.</literal></para>
				<para>Insertar fecha y hora de la franja horaria correspondiente al país en el que se encuentre. Esta
					debería coincidir con la seleccionada en la fase de ajustes básicos durante el proceso de
					configuración de los sensores IPS.
				</para>
				<para> El sistema le indica dos formatos posibles para la inserción de la fecha y la hora:</para>
				<itemizedlist mark="bullet">
					<listitem>
						<para><literal>[HH:mm]</literal> ó <literal>[YYYY/MM/DD]</literal></para>
					</listitem>
					<listitem>
						<para><literal> [YYYY/MM/DD HH:mm]</literal></para>
					</listitem>
				</itemizedlist>
				<para>Pulsar <keycap>Enter</keycap> para continuar con el proceso de registro.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img048.png"/>
					</imageobject>
					<caption>
						<para>Registro de los sensores en el Manager: Selección hora local</para>
					</caption>
				</mediaobject>
			</section>
			<section>
				<title>Introducir la IP del rB Master Manager</title>
				<para>Seleccionar la opción <literal>3) IP address for rB Master Manager [127.0.0.1].</literal></para>
				<para>Insertar la dirección IP o nombre de dominio del equipo utilizado por el usuario. El sistema
					realizará una serie de comprobaciones para verificar si es alcanzable. Este proceso puede llevar
					unos segundos.
				</para>
				<para>El sistema sincronizará la hora de los equipos y, a continuación, reiniciará un par de servicios
					con el objetivo de finalizar la sincronía horaria.
				</para>
				<para> ¡Enhorabuena! Su equipo está preparado para realizar el registro de los sensores en el Manager.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img049.png"/>
					</imageobject>
					<caption>
						<para>Insertar IP rB Master Manager</para>
					</caption>
				</mediaobject>
				<para>Para continuar, y regresar al menú de configuración del sistema redborder, pulse cualquier tecla
					tal y como se indica <literal>Press a key to continue...</literal>
				</para>
			</section>
			<section>
				<title>Registro de los sensores en el Manager</title>
				<para>Este es el último paso que da por finalizado el proceso de instalación y configuración del sensor
					Mail Gateway desde el asistente de instalación de redborder.
				</para>
				<para>A partir de este momento, usted podrá trabajar directamente desde la plataforma redborder en la
					que deberá realizar las últimas configuraciones generales para el sensor Mail Gateway, tal y como
					se verá más adelante.
				</para>
				<para><emphasis>Finalización del proceso del registro de los sensores en el Manager</emphasis></para>
				<para>Los pasos que se van a seguir para completar el proceso de registro de los sensores en el
					Manager son los siguientes:
				</para>
				<orderedlist numeration="arabic">
					<listitem>
						<para>Indicar si se desea tener una salida de depuración: el sistema formulará la siguiente
							pregunta <literal>Would you like to have a debug output?</literal>
							Seleccionar la opción predeterminada (No) insertando la letra <keycap>N</keycap>.
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Insertar password:</emphasis> indique la clave que se ha introducido
							en la fase de ajustes básicos para la configuración del Manager.
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold"> Sincronización temporal (automático) entre el Manager y los
							sensores.</emphasis> Este proceso puede llevar unos segundos en completarse.
						</para>
					</listitem>
				</orderedlist>
				<para>Tras la realización de estos pasos, el sistema le avisará con un mensaje de que el sensor ha sido
					registrado con éxito.
				</para>
				<para><literal> Sensor registered succesfully with chef server</literal></para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img051.png"/>
					</imageobject>
					<caption>
						<para>Registro del sensor en el servidor</para>
					</caption>
				</mediaobject>
				<warning>
					<title>Advertencia</title>
					<para>No cambie el nombre del sensor o <emphasis>hostname</emphasis> una vez que ha sido
						registrado. Si desea realizar cambios, será necesario deshacer todo el proceso de registro y
						comenzarlo de nuevo.
					</para>
				</warning>
				<para>Para continuar y regresar al menú de configuración del sistema redborder, pulse cualquier tecla
					tal y como se indica <literal>Press a key to continue...</literal>
				</para>
				<para>En el menú de registro de los sensores en el Manager redborder puede comprobar que el sensor ha
					sido registrado con éxito:<literal>(Registered).</literal>
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img052.png"/>
					</imageobject>
					<caption>
						<para>Registro del sensor realizado con éxito</para>
					</caption>
				</mediaobject>
				<para>Para salir del asistente de registro de los sensores en el Manager, seleccione la opción
					<literal>quit</literal> introduciendo la letra <keycap>q.</keycap>
				</para>
			</section>
		</section>
		<section>
			<title>Edición y configuración de los sensores Mail Gateway</title>
			<para>Para realizar la configuración de los sensores Mail Gateway es necesario acceder a la plataforma web
				de redborder insertando la IP de gestión asignada al Manager en la barra de direcciones de su navegador.
			</para>
			<para><screen>https://direccion-IP-manager</screen></para>
			<note>
				<title>Nota</title>
				<para>Es posible iniciar sesión en la plataforma usando la cuenta definida por defecto:
					<emphasis role="bold">admin o admin@redborder.net</emphasis> y con la contraseña que haya insertado
					en el proceso de instalación del Manager.
				</para>
			</note>
			<warning>
				<title>Advertencia</title>
				<para>La web de gestión no funcionará si se intenta acceder a ella mediante web no cifrada.</para>
			</warning>
			<para>La configuración de los sensores Mail Gateway se puede realizar de dos maneras: </para>
			<orderedlist numeration="arabic">
				<listitem>
					<para><emphasis role="bold">Configuración general de todos los sensores Mail Gateway:
					</emphasis> Tools -> Malware Settings -> Mail Gateway.
					</para>
				</listitem>
				<listitem>
					<para><emphasis role="bold">Configuración particular de cada uno de los sensores Mail Gateway:
					</emphasis> Sensors -> icono "Editar" de cada uno de los sensores.
					</para>
				</listitem>
			</orderedlist>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="150" fileref="images/ch11_img053.png"/>
				</imageobject>
				<caption>
					<para>Configuración general de los sensores Mail Gateway</para>
				</caption>
			</mediaobject>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img054.png"/>
				</imageobject>
				<caption>
					<para>Editar sensor Mail Gateway</para>
				</caption>
			</mediaobject>
			<para>A continuación, se explican cada una de las pantallas de configuración, así como los parámetros que se
				pueden modificar para la detección de Malware en su red.
			</para>
			<section>
				<title>General Settings: Configuración general de los sensores Mail Gateway</title>
				<para>Desde la interfaz <emphasis role="bold">Tools -> Malware Settings</emphasis> el usuario puede
					realizar la configuración general que va a aplicar en todos los sensores registrados. Recuerde que
					este nivel actúa como raíz, de manera que aquellos sensores que estén por debajo de él, heredarán la
					configuración que se haya definido en esta interfaz.
				</para>
				<note>
					<title>Nota</title>
					<para>Es posible sobrescribir la configuración general de los sensores Mail Gateway a nivel
						individual a través de su edición en la sección <literal>Sensors</literal> seleccionando el
						sensor a editar en el árbol o en el listado que aparece en Sensors -> View -> Gateway Sensors.
					</para>
				</note>
				<para>Estos son los apartados que el usuario deberá editar para la configuración a nivel root de los
					sensores Mail Gateway:
				</para>
				<itemizedlist mark="bullet">
					<listitem>
						<para>General</para>
					</listitem>
					<listitem>
						<para>Mail Gateway</para>
					</listitem>
					<listitem>
						<para>Blacklist</para>
					</listitem>
					<listitem>
						<para>Whitelist</para>
					</listitem>
				</itemizedlist>
			</section>
			<section>
				<title>Sensors: configuración individual de los sensores Mail Gateway</title>
				<para>Para editar la configuración de cualquiera de los sensores Mail Gateway a nivel individual
					el usuario debe dirigirse a la sección <literal>Sensors</literal> situada en el lado derecho del
					menú de cabecera. A continuación, deberá seleccionar el sensor que desea editar.
				</para>
				<para>En la vista árbol, los sensores Mail Gateway vienen acompañados de un icono identificativo.
					También puede buscar el sensor en el listado que se muestra desde <literal>View -> Gateway Sensors.</literal>
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img055.png"/>
					</imageobject>
					<caption>
						<para>Sensors: vías para la edición de un sensor</para>
					</caption>
				</mediaobject>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img056.png"/>
					</imageobject>
					<caption>
						<para>Listado de sensores Mail Gateway: Sensors -> View -> Gateway Sensors</para>
					</caption>
				</mediaobject>
				<para>Dentro del menú que se despliega encontramos las siguientes opciones:</para>
				<itemizedlist mark="circle">
					<listitem>
						<para><emphasis role="bold">Edit:</emphasis> permite la edición de la configuración de un sensor
							a nivel individual.
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Monitors</emphasis> </para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Quarantine:</emphasis> listado de los correos que se encuentran en
							cuarentena.
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Filter Policies:</emphasis> configuración y asignación de Filter
							Policies para cada sensor.
						</para>
					</listitem>
				</itemizedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img054.png"/>
					</imageobject>
					<caption>
						<para>Editar sensor Mail Gateway</para>
					</caption>
				</mediaobject>
				<para>Para comenzar la edición de los parámetros del sensor seleccionar <literal>Edit.</literal></para>
				<para>En la interfaz de edición del sensor se introducirá la siguiente información. Para guardar la
					configuración del sensor, hacer clic en el botón <keycap>Update.</keycap>
				</para>
				<note>
					<title>Nota</title>
					<para>Los campos nombre, IP y versión son no editables, ya que esta información se introduce en el
						proceso de configuración y registro del sensor.
					</para>
				</note>
				<section>
					<title>Gateway Settings</title>
					<para>En este apartado el usuario puede definir el comportamiento del sensor en base a los valores
						que introduzca en cada uno de los campos que se muestran en él.
					</para>
					<itemizedlist mark="circle">
						<listitem>
							<para><emphasis role="bold">Relay Host:</emphasis> Especificar la IP del servidor de correo final.</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Message Size Limit:</emphasis> Definir el tamaño máximo de los
								mensajes que se pueden recibir.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Max Paralell Process:</emphasis> Indicar el número máximo de
								procesos en paralelo que trata el Mail Gateway.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">API timeout (seconds):</emphasis> Definir el tiempo máximo de
								espera para la obtención de un score válido por parte de la caché remota.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Email detained timeout (seconds):</emphasis> En este campo se
								indica el tiempo máximo de espera para la obtención de un score válido por parte de la
								caché remota. Superado este tiempo el fichero se dejará pasar.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Quarantine timeout (days):</emphasis> Configurar los días que
								han de pasar desde que un fichero identificado como Malware es bloqueado y retenido
								hasta que se define una acción para gestionarlo. Si no se realiza ninguna acción o se
								supera el tiempo indicado el fichero es descartado.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Cache Sync (hours) (minutes):</emphasis> Indicar el tiempo
								máximo que debe pasar para la sincronización de la caché local y remota. Valor en horas
								y en minutos.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Maximum number of stored log files:</emphasis> Delimitar el
								tiempo máximo que el fichero permancerá almacenado en el histórico de correos.
							</para>
						</listitem>
					</itemizedlist>
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img058.png"/>
						</imageobject>
						<caption>
							<para>Gateway Settings</para>
						</caption>
					</mediaobject>
				</section>
				<section>
					<title>Relay Domains</title>
					<para>En este apartado el usuario debe definir qué dominio o dominios son los que van a estar
						gestionados por el sensor.
					</para>
					<para>Aquí se visualiza un listado de los dominios que ya han sido agregados. El usuario puede
						eliminar en cualquier momento aquellos dominios en desuso o que considere que no deben ser
						gestionados por el sensor.
					</para>
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img059.png"/>
						</imageobject>
						<caption>
							<para>Listado de Relay Domains</para>
						</caption>
					</mediaobject>
					<para>Para añadir un nuevo dominio basta con hacer clic en la en la pestaña <literal>+Add Domains</literal>
						e introducir el dominio que se desea asociar, haga clic en <keycap>Update</keycap> para guardar
						la información.
					</para>
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img060.png"/>
						</imageobject>
						<caption>
							<para>Añadir nuevo Relay Domain</para>
						</caption>
					</mediaobject>
					<warning>
						<title>Advertencia</title>
						<para>Una vez finalizada la edición del sensor Mail Gateway hacer clic en <literal>Update</literal>
							para aplicar los cambios realizados.
						</para>
					</warning>
				</section>
			</section>
			<section>
				<title>Quarantine</title>
				<para>Existen dos maneras de llegar al listado de correos puestos en cuarentena:</para>
				<orderedlist numeration="arabic">
					<listitem>
						<para><emphasis role="bold">Total de correos en cuarentena para todos los sensores Mail Gateway
							registrados:</emphasis> Sensors -> Options -> Mail Quarantine
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Correos en cuarentena para un sensor concreto:
						</emphasis> Sensors -> icono "Editar" de cada uno de los sensores -> Quarantine
						</para>
					</listitem>
				</orderedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img064.png"/>
					</imageobject>
					<caption>
						<para>Quarantine</para>
					</caption>
				</mediaobject>
				<para>En ambos casos se accede a una interfaz en la que se muestra un listado de todos los correos que
					han sido puestos en cuarentena y que muestra la siguiente información:
				</para>
				<itemizedlist mark="bullet">
					<listitem>
						<para><emphasis role="bold">Timestamp:</emphasis> fecha y hora de la recepción.</para>
					</listitem>
					<listitem>
						<para>Sensor por el que ha pasado el correo.</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Email sender:</emphasis> email del emisor.</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Email Destinations:</emphasis> email del receptor.</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">URLs:</emphasis> número de URLs incluidas en el correo.</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Files:</emphasis> número de archivos incluidos en el correo. </para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Email ID:</emphasis> número de identificación del email. </para>
					</listitem>
				</itemizedlist>
				<para><emphasis role="bold">Liberar email (Free email):</emphasis> en cualquier momento el usuario puede
					liberar de la cuarentena aquellos correos que considere que ya han sido analizados y que no
					representan un peligro. Para ello, haga clic en el siguiente icono:
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="50" fileref="images/ch11_img065.png"/>
					</imageobject>
					<caption>
						<para>Botón para liberar email</para>
					</caption>
				</mediaobject>
				<para><emphasis role="bold">Eliminar email (Remove email): </emphasis> haga clic en el icono "Eliminar".</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="50" fileref="images/ch11_img065b.png"/>
					</imageobject>
					<caption>
						<para>Botón para eliminar email</para>
					</caption>
				</mediaobject>
			</section>
			<section>
				<title>Filter Policies: sensores Mail Gateway</title>
				<para>Para acceder a la creación o edición de las Filter Policies el usuario tiene dos vías diferentes: </para>
				<orderedlist numeration="arabic">
					<listitem>
						<para><emphasis role="bold">Total de Filter Policies creadas para el sensor root:
						</emphasis> Sensors -> Options -> Filter Policies
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Filter Policies para un sensor concreto:</emphasis> Sensors -> icono
							"Editar" de cada uno de los sensores -> Filter Policies
						</para>
					</listitem>
				</orderedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img066.png"/>
					</imageobject>
					<caption>
						<para>Listado de Filter Policies para el sensor root</para>
					</caption>
				</mediaobject>
				<para>En ambos casos el usuario accede a una interfaz en la que visualiza un listado con todas las Filter
					Policies que han sido creadas para ese sensor. La política que se encuentra activa (asignada)
					aparecerá sombreada en color verde.
				</para>
				<para>Para asignar una política a un sensor hacer clic en el botón <literal>Assign</literal>. Para
					aplicar la política asignada al sensor seleccionar la opción <literal>Apply</literal>.
				</para>
				<para>Para desasignar una política seleccionar la opción <literal>Clear</literal>.</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img067.png"/>
					</imageobject>
					<caption>
						<para>Listado de Filter Policies para un sensor Mail Gateway</para>
					</caption>
				</mediaobject>
				<section>
					<title>Creación de una nueva Filter Policy</title>
					<para>Una vez que se ha accedido a la interfaz de Filter Policies para crear una nueva política basta
						con seleccionar la opción <literal>+New Policy</literal>. El usuario deberá indicar al menos un
						nombre para la nueva política y de modo opcional, insertar una descripción.
					</para>
					<para>A continuación deberá indicar las reglas que se incluyen en esta política. El procedimiento
						variará según se quiera aplicar la política a nivel de Hash, URL o IP.
					</para>
					<para>Para definir las reglas de la política basta con hacer clic sobre la política que se desea
						modificar o bien mediante el icono "Editar".
					</para>
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img068.png"/>
						</imageobject>
						<caption>
							<para>Crear una nueva Filter Policy</para>
						</caption>
					</mediaobject>
					<para>La interfaz de edición de las Filter Policies consta de dos apartados: Edit Filter Policy y
						Threshold Configuration. En ambos apartados el usuario puede editar la siguiente información:
					</para>
					<itemizedlist mark="bullet">
						<listitem>
							<para><emphasis role="bold">Name</emphasis></para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Description</emphasis></para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Caché query method:</emphasis> el usuario debe indicar el tipo
								de consultas que desea que se realicen a la caché.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Apply Filter Policy for:</emphasis> seleccionar el tipo de objeto
								a analizar.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Score to consider element as Malware:</emphasis> indicar el score
								a partir del cual un objeto es considerado Malware.
							</para>
						</listitem>
						<listitem>
							<para><emphasis role="bold">Drop files that exceed this size (MB)</emphasis> (este campo
								solo se encuentra habilitado en el caso de que se haya seleccionado aplicar la política
								para Hash): indicar el tamaño máximo de los ficheros a partir del cual serán bloqueados
								por el sistema.
							</para>
						</listitem>
					</itemizedlist>
					<note>
						<title>Configuración recomendada</title>
						<para><emphasis role="bold">Caché query method:</emphasis> Local+API</para>
						<para><emphasis role="bold">Apply Filter Policy for:</emphasis> se recomienda seleccionar los
							tres tipos de objetos (Hash, URL e IP).
						</para>
					</note>
					<para><emphasis role="bold">File Rules</emphasis></para>
					<para>En el caso de que se haya activado en el campo <literal>Apply Filter Policy for:</literal> la
						casilla correspondiente a Hash se desplegará un nuevo apartado en el margen inferior: File Rules.
					</para>
					<mediaobject>
						<imageobject>
							<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img069.png"/>
						</imageobject>
						<caption>
							<para>Filter Policies: File Rules</para>
						</caption>
					</mediaobject>
					<para>En este apartado se muestra un listado del tipo de ficheros sobre los que se pueden realizar
						acciones. Las acciones disponibles son:
					</para>
					<itemizedlist mark="bullet">
						<listitem>
							<para>Filter</para>
						</listitem>
						<listitem>
							<para>Drop (bloqueo)</para>
						</listitem>
						<listitem>
							<para>Pass</para>
						</listitem>
					</itemizedlist>
					<para>Para aplicar la nueva configuración seleccionar la opción <literal>Save.</literal></para>
				</section>
			</section>
		</section>
		<section>
			<title>Eventos Malware (Mail Gateway)</title>
			<para>Para realizar un seguimiento y análisis profundo de los objetos que están interactuando con nuestra
				red, el usuario puede realizar una serie de acciones desde la sección Malware situada en el margen
				izquierdo del menú de cabecera.
			</para>
			<note>
				<title>Visualización de los objetos detectados por el sensor Mail Gateway</title>
				<para>Para visualizar los eventos producidos por los objetos detectados por el sensor Mail Gateway el
					usuario puede seleccionar los atributos correspondientes a Hash, URL e IP mediante la opción
					<literal>+Add Tab.</literal>
				</para>
				<para>De este modo, esos atributos se añadirán a la vista y el usuario podrá realizar diferentes
					acciones sobre ellos.
				</para>
			</note>
			<para>Una vez que hemos añadido a la vista los atributos deseados podremos visualizar un resumen con los
				eventos producidos por ellos. Al hacer clic sobre cualquiera de estos elementos se despliega un submenú
				desde el cual se pueden realizar acciones de análisis y seguimiento de los objetos.
			</para>
			<mediaobject>
				<imageobject>
					<imagedata scalefit="1" align="center" width="150" fileref="images/ch11_img070.png"/>
				</imageobject>
				<caption>
					<para>Submenú atributos en vista de eventos Malware</para>
				</caption>
			</mediaobject>
			<section>
				<title>Outliers</title>
				<para>Activando esta opción se marcarán en la vista las anomalías de los eventos del atributo
					seleccionado. Esta acción es muy útil para aislar comportamientos anómalos dentro del flujo del
					tráfico.
				</para>
			</section>
			<section>
				<title>Filenames (Hash)</title>
				<para>Mediante esta opción el usuario obtiene  a partir de un Hash los sucesivos nombres que ha tenido
					un fichero. Esto simplifica la identificación de un fichero alq ue se le ha asignado un único Hash
					aunque este haya tenido diferentes nombres.
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="350" fileref="images/ch11_img071.png"/>
					</imageobject>
					<caption>
						<para>Filenames</para>
					</caption>
				</mediaobject>
			</section>
			<section>
				<title>Analysis</title>
				<para>Al seleccionar la opción <literal>Analysis</literal> el usuario visualiza un completo resumen
					sobre el estado del fichero.
				</para>
				<para>En la pantalla de Analysis se muestra la siguiente información:</para>
				<itemizedlist mark="bullet">
					<listitem>
						<para><emphasis role="bold">Status</emphasis></para>
						<para>En este apartado se muestra el progreso del análisis del fichero y la información
							correspondiente a los servicios externos de reputación.
						</para>
						<para>Es posible descargar el fichero que se está analizando mediante la opción
							<literal>Download File</literal>. Se descargará un fichero comprimido en formato .zip,
							cuya contraseña es <literal>infected</literal>.
						</para>
					</listitem>
					<listitem>
						<para><emphasis role="bold">Loaders</emphasis></para>
						<para>En este apartado se muestra con mayor grado de detalle el proceso y resultado del análisis
							realizado por los diferentes cargadores o servicios de reputación<!-- TODO
							<footnote><para>En el caso de Cuckoo dependiendo de la cantidad de archivos a analizar puede existir una demora a la hora de reflejar el score. </para></footnote>-->.</para>
						<para>Es posible realizar la descarga del histórico del fichero en formato JSON.</para>
						<note>
							<title>Nota</title>
							<para>Estos son los valores que pueden aparecer como resultado del análisis realizado por los cargadores:</para>
							<para><emphasis role="bold">-</emphasis>: elemento no analizado.</para>
							<para><emphasis role="bold">Unknown</emphasis>: el elemento ha sido analizado, pero el
								resultado es desconocido (equivalente a un score de -1).
							</para>
						</note>
					</listitem>
				</itemizedlist>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img072.png"/>
					</imageobject>
					<caption>
						<para>Analysis -> Status</para>
					</caption>
				</mediaobject>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img073.png"/>
					</imageobject>
					<caption>
						<para>Analysis -> Loaders</para>
					</caption>
				</mediaobject>
				<note>
					<title>Nota</title>
					<para>En cualquier momento se puede pasar a la vista de Evolución o Propagación del objeto que se está
						analizando, gracias a la posibilidad de saltar de una vista a otra mediante las opciones que se
						muestran en el margen superior derecho: <literal>Show Evolution/Show Propagation.</literal>
					</para>
				</note>
			</section>
			<section>
				<title>Evolution</title>
				<para><literal>Evolution</literal> muestra la evolución temporal de los diferentes eventos recogidos por
					cada uno de los sensores que se encuentran registrados en el Manager.
				</para>
				<para>En la parte superior de la pantalla encontramos una representación gráfica de esta evolución sobre
					una línea de tiempo. Dependiendo del volumen de los círculos se habrán registrado mayor o menor
					número de eventos para un periodo de tiempo determinado.
				</para>
				<para>Es posible visualizar la evolución de un objeto en un tiempo concreo mediante la selección de
					<literal>Filter Time.</literal>
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img074.png"/>
					</imageobject>
					<caption>
						<para>Filter Time</para>
					</caption>
				</mediaobject>
				<para>En la parte inferior se ofrece un resumen detallado de cada uno de los eventos por sensor
					especificando el score asignado para el objeto que se está analizando, el sensor, SRC Address DST
					Address, el email emisor, los emails receptores y el número de eventos generados por ese objeto (en
					la imagen se trata de eventos registrados para ese Hash/fichero).
				</para>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img075.png"/>
					</imageobject>
					<caption>
						<para>Show evolution</para>
					</caption>
				</mediaobject>
				<note>
					<title>Nota</title>
					<para>En cualquier momento se puede pasar a la vista de Análisis o propagación del objeto cuya
						evolución se está analizando, gracias a la posibilidad de saltar de una vista a otra mediante
						las opciones que se muestran en el margen superior derecho:
						<literal>Show Analysis/Show Propagation.</literal>
					</para>
				</note>
			</section>
			<section>
				<title>Propagation</title>
				<para>Al seleccionar la opción <literal>Propagation</literal> accedemos a una interfaz en la que se nos
					muestra de manera gráfica la propagación de ese objeto (en la imagen hash o fichero) a través de las
					IPs o Emails de nuestra organización.
				</para>
				<para>Haciendo clic en alguno de los nodos que se muestran (IPs/emails de origen y de destino) se
					visualiza en la parte inferior un resumen de todos los eventos asociados a ese nodo en el periodo de
					tiempo seleccionado.
				</para>
				<para>Asimismo, colocando el ratón encima de cualquiera de los nodos se destacarán los nodos (IPs/Emails)
					que hayan interactuado con él.
				</para>
				<important>
					<title>Importante</title>
					<para>Es posible filtrar un elemento concreto introduciendo sus datos en el buscador que se
						encuentra en el margen derecho. Al comenzar a escribir los datos se irán destacando aquellos
						nodos coincidentes.
					</para>
				</important>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img076.png"/>
					</imageobject>
					<caption>
						<para>Propagation</para>
					</caption>
				</mediaobject>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img077.png"/>
					</imageobject>
					<caption>
						<para>Propagation: eventos de un nodo</para>
					</caption>
				</mediaobject>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img078.png"/>
					</imageobject>
					<caption>
						<para>Propagation: detalle de interacción entre nodos</para>
					</caption>
				</mediaobject>
				<mediaobject>
					<imageobject>
						<imagedata scalefit="1" align="center" width="450" fileref="images/ch11_img079.png"/>
					</imageobject>
					<caption>
						<para>Propagation: filtrar información a través del buscador</para>
					</caption>
				</mediaobject>
				<note>
					<title>Nota</title>
					<para>En cualquier momento se puede pasar a la vista de Evolución o Propagación del objeto que se
						está analizando, gracias a la posibilidad de saltar de una vista a otra mediante las opciones
						que se muestran en el margen superior derecho: <literal>Show Analysis/Show Evolution.</literal>
					</para>
				</note>
			</section>
		</section>
		</section>
	</section>
</chapter>

