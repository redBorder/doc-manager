<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "manual.ent">
<!ENTITY PRODUCT "Documentation">
<!ENTITY BOOKID "manual">
<!ENTITY YEAR "2020">
<!ENTITY HOLDER "Eneo TecnologÃ­a S.L. |">
]>

<chapter>
	<title>Advanced</title>
	<para>In this chapter we will show some advanced settings and tools for Redborder configuration and administration.</para>
	<section>
		<title>Architecture</title>
		<para>Redborder has an open source based architecture, using technologies like Snort, Kafka or Logstash.</para>
		<para>All these technologies are orquested by Zookeeper and Chef, so it is important to have those services running for the good functioning of Redborder.</para>
		<mediaobject>
			<imageobject>
				<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img001.png"/>
			</imageobject>
			<caption>
				<para>Architecture of Redborder</para>
			</caption>
		</mediaobject>
	</section>
	<section>
		<title>Operations</title>
		<para>There are some important operations that must be executed in order to do advanced settings in Redborder.</para>
		<itemizedlist mark="circle">
					<listitem>
						<para><emphasis role="bold">motd</emphasis>: Motd shows general info about node and cluster</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img002.png"/>
							</imageobject>
							<caption>
								<para>Motd: output</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_get_managers.rb</emphasis>: Shows information about nodes on the cluster</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img003.png"/>
							</imageobject>
							<caption>
								<para>rb_get_managers.rb: output</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_get_services.sh</emphasis>: Get all the services status on the node. Used with option all shows information for all nodes. If optional the service is added too, only the status of this service is shown</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img004.png"/>
							</imageobject>
							<caption>
								<para>rb_get_services.sh: output</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_set_service.rb</emphasis>: Allows to enable or disable a service.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img005.png"/>
							</imageobject>
							<caption>
								<para>rb_set_service.rb: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_service</emphasis>: Allows to work with a service. It can start, stop and restart services. Can be used with services such as postgresql, riak, hadoop, zookeeper, druid, kafka, chef and more.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img006.png"/>
							</imageobject>
							<caption>
								<para>rb_service: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_set_topics.rb</emphasis>: Assign the destination of the topic. which can be samza of realtime. Corresponding services need to be started to keep the correct working of the redborder platform.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img007.png"/>
							</imageobject>
							<caption>
								<para>rb_set_topics.rb: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_cluster_configure.rb</emphasis>: Get all services status for all nodes. Allows to change the configuration for the whole cluster.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img008.png"/>
							</imageobject>
							<caption>
								<para>rb_cluster_configure.rb: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_manager_ssh.sh</emphasis>: This command is used to move or execute another command on other node.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img009.png"/>
							</imageobject>
							<caption>
								<para>rb_manager_ssh.sh: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_manager_scp.sh</emphasis>: This script is used to copy a file from the manager where is being launched to all other nodes or a list of nodes.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img010.png"/>
							</imageobject>
							<caption>
								<para>rb_manager_scp.sh: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_cluster_reboot.sh</emphasis>: Order the reboot for all cluster nodes.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img011.png"/>
							</imageobject>
							<caption>
								<para>rb_cluster_reboot.sh: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_cluster_update.sh</emphasis>: It is used to upgrade the manager to a new released version.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img012.png"/>
							</imageobject>
							<caption>
								<para>rb_cluster_update: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_get_tasks.rb</emphasis>: Gets information about indexing service.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img013.png"/>
							</imageobject>
							<caption>
								<para>rb_get_tasks.rb: usage</para>
							</caption>
						</mediaobject>
					</listitem>
					<listitem>
						<para><emphasis role="bold">rb_wakeup_chef</emphasis>: Starts the chef-client in all the nodes.</para>
						<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img014.png"/>
							</imageobject>
							<caption>
								<para>rb_wakeup_chef: usage</para>
							</caption>
						</mediaobject>
					</listitem>					
		</itemizedlist>
	</section>
	<section>
		<title>Redborder technologies</title>
		<para>In this section we will explain the <emphasis role="bold">main technologies</emphasis> Redborder uses to manage and use all data it is provided.</para>
		<para>All main technologies used in Redborder are open source, which allows period updates and more quality.</para>
			<section>
				<title>Siddhi</title>
				<para>Siddhi is an <emphasis role="bold">open source Complex Event Processor</emphasis> that Redborder uses in vault module to apply rules to incoming events. It allows us to create rules that can alert us from any kind of behaviour reflected in the events.</para>
				<para>Siddhi is used in Redborder to make it able to raise alarm when a determinate situation is present in the network.</para>
				<para>Siddhi uses an SQL sentence structure, so it is possible to edit all rules included in Redborder by default.</para>
				<para>It is necessary to have certain level of knowledge about Siddhi to create useful rules.</para>
				<para>It is necessary to <emphasis role="bold">activate the correlation engine</emphasis>. This will use more machine resources, so it is necessary to be sure that the system has enought RAM memory.</para>
				<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img015.png"/>
							</imageobject>
							<caption>
								<para>Siddhi rules available in the manager correlation engine</para>
							</caption>
				</mediaobject>
			</section>
			<section>
				<title>Snort</title>
				<para>Snort is an <emphasis role="bold">open source network intrusion prevention system</emphasis> that process and analyzes real time traffic.</para>
				<para>Redborder uses Snort in intrussion module to configure multiple rule policies, as well as store and analyze the alerts generated. </para>
				<para>Snort system is based in rules, which are partially provided by the community.</para>
				<para>It is possible to update the rules manually, so it ensures that, with the lastest set of Snort rules, the traffic is being analyzed and monitorized.</para>
				<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img016.png"/>
							</imageobject>
							<caption>
								<para>Table of IPS events</para>
							</caption>
				</mediaobject>
			</section>
			<section>
				<title>Hadoop</title>
				<para>Hadoop is an open source <emphasis role="bold">distributed processing framework</emphasis> that manages data processing and storage for big data applications running in clustered systems.</para>
				<para>It's used by Redborder to provide real time traffic analysis of Big Data.</para>
				<para>Also, Hadoop is not enabled by default in a Redborder manager, because of its requirements of resources. It is very important to have strong resources to run Redborder using Hadoop, at least 64Gb RAM.</para>
				<mediaobject>
							<imageobject>
								<imagedata scalefit="1" align="center" width="450" fileref="images/ch20_img017.png"/>
							</imageobject>
							<caption>
								<para>Hadoop for RAW Storage</para>
							</caption>
				</mediaobject>
			</section>
	</section>
</chapter>
